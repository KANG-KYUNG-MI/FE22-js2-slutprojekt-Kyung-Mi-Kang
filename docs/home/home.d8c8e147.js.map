{"mappings":"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","sources":["node_modules/@parcel/runtime-js/lib/helpers/bundle-manifest.js","node_modules/@parcel/runtime-js/lib/runtime-200b18d624d0b16c.js","src/home/home.ts","node_modules/@parcel/runtime-js/lib/runtime-08b50a2adfce58c0.js","node_modules/@parcel/runtime-js/lib/runtime-77d5544b9932390e.js","node_modules/@parcel/runtime-js/lib/runtime-8ee735fd0a5f6850.js","node_modules/@parcel/runtime-js/lib/runtime-bedfc3e51892963c.js"],"sourcesContent":["\"use strict\";\n\nvar mapping = {};\n\nfunction register(pairs) {\n  var keys = Object.keys(pairs);\n\n  for (var i = 0; i < keys.length; i++) {\n    mapping[keys[i]] = pairs[keys[i]];\n  }\n}\n\nfunction resolve(id) {\n  var resolved = mapping[id];\n\n  if (resolved == null) {\n    throw new Error('Could not resolve bundle with id ' + id);\n  }\n\n  return resolved;\n}\n\nmodule.exports.register = register;\nmodule.exports.resolve = resolve;","require('./helpers/bundle-manifest').register(JSON.parse(\"{\\\"i85Qc\\\":\\\"home.d8c8e147.js\\\",\\\"abxcp\\\":\\\"Brown.a9beda0a.jpg\\\",\\\"1Fupy\\\":\\\"Choco.9b8eb164.jpg\\\",\\\"Zz5rb\\\":\\\"ConMuzi.987b79ea.jpg\\\",\\\"5CL5F\\\":\\\"Selly.80e40361.jpg\\\"}\"));","export type messageType = {\n  pic: string,\n  username: string,\n  createdAt: string,\n  msg: string\n}\n\n//const containers = document.querySelector('.containers')! as HTMLDivElement;\nconst container = document.querySelector('.container')! as HTMLDivElement;\nconst inputName = document.querySelector('#inputName')! as HTMLInputElement;\nconst submitBtn = document.querySelector('#btn')! as HTMLButtonElement;\nconsole.log(container);\n\n\nconst personalInfo: string = localStorage.getItem('personalInfo') as string;\nconst item = document.querySelectorAll('.item')! as NodeListOf<HTMLButtonElement>\n\n\nlet data: any\nasync function showItems() {\n  const url = `https://js2-slutprojekt-default-rtdb.europe-west1.firebasedatabase.app/users/.json`;\n\n  const response = await fetch(url);\n  const items = await response.json();\n  data = items\n  console.log(items);\n  return items;\n}\nshowItems()\n  .then((items: object) => {\n    console.log(items);\n    displayItems(items);\n\n    localStorage.setItem('allUserInfo', JSON.stringify(items));\n  })\n  .catch((error) => console.log(error));\n\n\nfunction displayItems(items: object) {\n  console.log(items);\n  container.innerHTML = Object.values(items)\n    .map((item, idx) => createHtmlString(item, idx))\n    .join('');\n\n  const btns = document.querySelectorAll('.goToPersnalInfo') as NodeListOf<HTMLButtonElement>\n\n  btns.forEach((btn, idx) => {\n    btn.addEventListener('click', (e) => {\n      e.preventDefault();\n      console.log(idx);\n\n      console.log(Object.keys(data)[idx]);\n      let address = Object.keys(data)[idx]\n      console.log(e.target);\n      let user = Object.values(data)[idx];\n\n      window.location.href = `../account/index.html?id=${Object.keys(data)[idx]}`;\n\n    })\n  })\n\n  function createHtmlString(individualUser: any, idx: number) {\n\n    let parcedMyUser = JSON.parse(personalInfo)\n    let parcedAllUsers = JSON.parse(localStorage.getItem('allUserInfo') as string)\n\n    console.log(individualUser);\n    let domObject,url: string;\n    if (individualUser.pic == \"Brown.jpg\")\n      url = new URL(\"../media/Brown.jpg\", import.meta.url).toString()\n    else if (individualUser.pic == \"Choco.jpg\")\n      url = new URL(\"../media/Choco.jpg\", import.meta.url).toString()\n    else if (individualUser.pic == \"ConMuzi.jpg\")\n      url = new URL(\"../media/ConMuzi.jpg\", import.meta.url).toString()\n    else if (individualUser.pic == \"Selly.jpg\")\n      url = new URL(\"../media/Selly.jpg\", import.meta.url).toString()\n    else\n      url=\"\";\n      domObject = `<img src=\"${url}\" alt=\"pfp\">`;\n      \n    if(parcedMyUser.username === individualUser.username) localStorage.setItem( \"userPicUrl\",url);\n\n    return `\n      <div class=\"item ${parcedMyUser.username === individualUser.username ? 'myUser' : ''}\">\n        ${domObject}\n        <span class=\"item_name\">${individualUser.username.split('@')[0]}</span>         \n        <button username =\"${individualUser.username}\" pic=${individualUser.pic}  class='goToPersnalInfo'>Click to watch more</button>\n      </div>\n    `;\n  }\n}\n\n\n//status updating---------------------------------------------\n\nlet post: messageType;\nsubmitBtn.addEventListener('click', (e) => {\n  e.preventDefault();\n\n  const parcedUser: messageType = JSON.parse(localStorage.getItem('personalInfo') as string)\n  console.log(\"user\", parcedUser);\n\n  post = {\n    username: parcedUser.username,\n    pic: parcedUser.pic,\n    createdAt: new Date().toISOString(),\n    msg: inputName.value\n  }\n  console.log(\"user\", post);\n  postItem(post, true);\n})\n\n\nasync function postItem(post: messageType, reload: boolean): Promise<viod> {\n  const url = `https://js2-slutprojekt-default-rtdb.europe-west1.firebasedatabase.app/posts/.json`;\n  const init = {\n    method: 'POST',\n    body: JSON.stringify(post),\n    headers: {\n      'Content-type': 'application/json; charset=UFT-8',\n    },\n  };\n\n  try {\n    const response = await fetch(url, init);\n    const data = await response.json();\n    console.log(post);\n\n\n    let accountInfo = localStorage.setItem('accountlInfo', JSON.stringify(post))\n    let accountPersonalInfo: object = JSON.parse(localStorage.getItem('accountInfo')) as object\n    console.log(accountPersonalInfo);\n\n\n    alert('You have successfully registered');\n    if (reload) location.reload();\n  } catch (error) {\n    console.log(error);\n  }\n}\n\n// //--------------------------------------------------------------\nasync function showStatus() {\n  const url = `https://js2-slutprojekt-default-rtdb.europe-west1.firebasedatabase.app/posts/.json`;\n  const response = await fetch(url);\n  const items = await response.json();\n  //data = items\n  console.log(items);\n  return items;\n}\n\nshowStatus()\n  .then((items: messageType) => {\n    console.log(Object.values(items))\n    const messageList = Object.values(items)\n    for (let i: number = 0; i < messageList.length; i++) {\n\n      let domObject: string;\n      if (messageList[i].pic == \"Brown.jpg\")\n        domObject = `${new URL(\"../media/Brown.jpg\", import.meta.url).toString()}`\n      else if (messageList[i].pic == \"Choco.jpg\")\n        domObject = `${new URL(\"../media/Choco.jpg\", import.meta.url).toString()}`\n      else if (messageList[i].pic == \"ConMuzi.jpg\")\n        domObject = `${new URL(\"../media/ConMuzi.jpg\", import.meta.url).toString()}`\n      else if (messageList[i].pic == \"Selly.jpg\")\n        domObject = `${new URL(\"../media/Selly.jpg\", import.meta.url).toString()}`\n\n      const itemsStatus = document.querySelector('.itemsStatus');\n\n      const imgStatus = document.createElement('img') as HTMLImageElement;\n      imgStatus.src = domObject;\n      const divStatus = document.createElement('div') as HTMLDivElement;\n      divStatus.append(imgStatus);\n\n      console.log(messageList[i].msg);\n\n      (itemsStatus as HTMLDivElement).append(divStatus);\n      const p = document.createElement('p');\n      p.innerText = messageList[i].msg;\n      divStatus.appendChild(p);\n\n    }\n  })\n  .catch((error) => console.log(error));\n\n\n","module.exports = new __parcel__URL__(\"../\" + require('./helpers/bundle-manifest').resolve(\"abxcp\")).toString();","module.exports = new __parcel__URL__(\"../\" + require('./helpers/bundle-manifest').resolve(\"1Fupy\")).toString();","module.exports = new __parcel__URL__(\"../\" + require('./helpers/bundle-manifest').resolve(\"Zz5rb\")).toString();","module.exports = new __parcel__URL__(\"../\" + require('./helpers/bundle-manifest').resolve(\"5CL5F\")).toString();"],"names":["$18c11f3350a906ea$export$6503ec6e8aabbaf","$18c11f3350a906ea$export$f7ad0328861e2f03","$18c11f3350a906ea$var$mapping","pairs","keys","Object","i","length","id","resolved","Error","parcelRequire","register","JSON","parse","$a8f6b1baf2aab6ee$var$container","document","querySelector","$a8f6b1baf2aab6ee$var$inputName","$a8f6b1baf2aab6ee$var$submitBtn","console","log","$a8f6b1baf2aab6ee$var$personalInfo","localStorage","getItem","querySelectorAll","$a8f6b1baf2aab6ee$var$data","async","response","fetch","items","json","$a8f6b1baf2aab6ee$var$showItems","then","innerHTML","values","map","item","idx","createHtmlString","join","individualUser","domObject","url","parcedMyUser","pic","URL","$ea864c8a3f3a5010$exports","toString","$fec97df6124a3d6b$exports","$70507af263e398ae$exports","$a6bcd8a50ded6c19$exports","username","setItem","split","forEach","btn","addEventListener","e","preventDefault","target","window","location","href","$a8f6b1baf2aab6ee$var$displayItems","stringify","catch","error","resolve","$a8f6b1baf2aab6ee$var$post","parcedUser","createdAt","Date","toISOString","msg","value","post","reload","init","method","body","headers","accountPersonalInfo","alert","$a8f6b1baf2aab6ee$var$postItem","$a8f6b1baf2aab6ee$var$showStatus","messageList","itemsStatus","imgStatus","createElement","src","divStatus","append","p","innerText","appendChild"],"version":3,"file":"home.d8c8e147.js.map"}