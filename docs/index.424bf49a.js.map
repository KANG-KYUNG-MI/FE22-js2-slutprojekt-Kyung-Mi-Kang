{"mappings":"AAOA,MAAMA,EAAWC,SAASC,eAAe,YACnCC,EAAgBF,SAASC,eAAe,YACxCE,EAAgBH,SAASC,eAAe,YAC9C,IAAIG,EAAsB,GAE1B,MAAMC,EAAsBC,aAAaC,QAAQ,eACjDC,QAAQC,IAAIJ,GAEZ,MAAMK,EAA0BC,KAAKC,MAAMP,GAM3CQ,eAAeC,IACX,MACMC,QAAiBC,MADX,qFAENC,QAAcF,EAASG,OAE7B,OADAd,EAAQa,EACDA,CACX,CAXAT,QAAQC,IAAIC,GAcZI,IAAUK,MAAMF,IACZT,QAAQC,IAAIQ,GAEZ,IAAIG,EAAcC,OAAOC,KAAKL,GAE9B,OADAT,QAAQC,IAAIW,GACLA,CAAA,IAGNG,OAAOC,IAAWhB,QAAQC,IAAIe,EAAA,IAKnChB,QAAQC,IAAI,kBAAkBgB,MAAM,KAAK,IAEzC1B,EAAS2B,iBAAiB,SAAUC,IAChC,IAAIC,EAAW1B,EAAc2B,MACzBC,EAAW3B,EAAc0B,MAC7BF,EAAEI,iBACFjB,IAQJ,SAAsBkB,GAElB,IAAIJ,EAAW1B,EAAc2B,MACzBC,EAAW3B,EAAc0B,MACzBT,EAAcC,OAAOC,KAAKU,GAE9BX,OAAOY,OAAOD,GAAOE,SAAQ,CAACC,EAAMC,KAChC,GAAIR,IAAaO,EAAKP,UAAYE,IAAaK,EAAKL,SAAU,CAC1DO,OAAOC,SAASC,KAAO,mBACvB,IAAIC,EAAoB,CAEpBV,SAAUK,EAAKL,SACfF,SAAUO,EAAKP,SACfa,IAAKN,EAAKM,IACVC,QAAStB,EAAYgB,IAGrBO,GADkBrC,aAAasC,QAAQ,eAAgBjC,KAAKkC,UAAUL,IAC/C7B,KAAKC,MAAMN,aAAaC,QAAQ,kBAC3DC,QAAQC,IAAIkC,EAChB,IAGJ,CA7BAG,CAAa1C,GACTiB,OAAOY,OAAO7B,GAAO2C,MAAMZ,GAASP,IAAaO,EAAKP,UAAYE,IAAaK,EAAKL,YACpFkB,MAAM","sources":["src/index.ts"],"sourcesContent":["export type userType = {\r\n    address: string,\r\n    username: string,\r\n    password: string,\r\n    pic: string\r\n}\r\n\r\nconst logInBtn = document.getElementById('logInBtn') as HTMLButtonElement;\r\nconst userNameInput = document.getElementById('UserName') as HTMLInputElement;\r\nconst passwordInput = document.getElementById('password') as HTMLInputElement;\r\nlet users: any | object = [];\r\n\r\nconst allUserInfo: string = localStorage.getItem('allUserInfo') as string;\r\nconsole.log(allUserInfo);\r\n\r\nconst allUserInfoList: object = JSON.parse(allUserInfo) as object\r\nconsole.log(allUserInfoList);\r\n\r\nlet userAddress: object\r\n\r\n\r\nasync function getData() {\r\n    const url = 'https://js2-slutprojekt-default-rtdb.europe-west1.firebasedatabase.app/users.json'\r\n    const response = await fetch(url);\r\n    const items = await response.json();\r\n    users = items\r\n    return items\r\n}\r\n\r\n\r\ngetData().then((items) => {\r\n    console.log(items);\r\n\r\n    let userAddress = Object.keys(items)\r\n    console.log(userAddress);\r\n    return userAddress;\r\n\r\n})\r\n    .catch((error) => {console.log(error)\r\n       // alert('User not found')\r\n    }\r\n    );\r\n\r\nconsole.log('kyung@gmail.com'.split('@')[0])\r\n\r\nlogInBtn.addEventListener('click', (e) => {\r\n    let username = userNameInput.value;\r\n    let password = passwordInput.value;\r\n    e.preventDefault();\r\n    getData();\r\n    setLoginUser(users)\r\n    if(!Object.values(users).find((user) => username === user.username && password === user.password))   {\r\n        alert('User not found')\r\n    }\r\n\r\n})\r\n\r\nfunction setLoginUser(users) {\r\n\r\n    let username = userNameInput.value;\r\n    let password = passwordInput.value;\r\n    let userAddress = Object.keys(users)\r\n\r\n    Object.values(users).forEach((user, index) => {\r\n        if (username === user.username && password === user.password) {\r\n            window.location.href = './home/home.html';\r\n            let newUser: userType = {\r\n\r\n                password: user.password,\r\n                username: user.username,\r\n                pic: user.pic,\r\n                address: userAddress[index]\r\n            }\r\n            let setPersonalInfo = localStorage.setItem('personalInfo', JSON.stringify(newUser))\r\n            let personalInfo: string = JSON.parse(localStorage.getItem('personalInfo') as string);\r\n            console.log(personalInfo);\r\n        } \r\n    }\r\n  )\r\n    } "],"names":["$b4e14b6b8da86996$var$logInBtn","document","getElementById","$b4e14b6b8da86996$var$userNameInput","$b4e14b6b8da86996$var$passwordInput","$b4e14b6b8da86996$var$users","$b4e14b6b8da86996$var$allUserInfo","localStorage","getItem","console","log","$b4e14b6b8da86996$var$allUserInfoList","JSON","parse","async","$b4e14b6b8da86996$var$getData","response","fetch","items","json","then","userAddress","Object","keys","catch","error","split","addEventListener","e","username","value","password","preventDefault","users","values","forEach","user","index","window","location","href","newUser","pic","address","personalInfo","setItem","stringify","$b4e14b6b8da86996$var$setLoginUser","find","alert"],"version":3,"file":"index.424bf49a.js.map"}