{"mappings":"AAOAA,eAAeC,IAEX,MACMC,QAAiBC,MADZ,qFAELC,QAAcF,EAASG,OAG7B,OAFAC,QAAQC,IAAIH,GAELA,CACT,CAEAH,IACGO,MAAMC,IACLH,QAAQC,IAAIE,GACZC,aAAaC,QAAQ,cAAeC,KAAKC,UAAUJ,GAAA,IAGpDK,OAAOC,GAAUT,QAAQC,IAAIQ,KAElC,MAAMC,EAAsBN,aAAaO,QAAQ,eAEzCC,EAAkBN,KAAKO,MAAMH,GAGnC,IAAKI,EAAYC,OAAOC,OAAOJ,GAASK,OACxCjB,QAAQC,IAAIa,GAECI,SAASC,eAAe,QACrC,IAAIC,EAAgBF,SAASC,eAAe,iBACxCE,EAAYH,SAASC,eAAe,aACpCG,EAAeJ,SAASC,eAAe,gBAEvCI,EAAYL,SAASC,eAAe,UAGpCK,GAFYN,SAASC,eAAe,iBAEhB,CACtBM,GAAI,EACJC,SAAU,GACVC,SAAU,GACVC,IAAK,KAGPJ,EAAQI,IAAMV,SAASW,iBAAiB,uBAAuB,GAAGC,MA6BlET,EAAUU,iBAAiB,UAAWC,IACpCR,EAAQE,SAAWM,EAAGC,OAA4BH,MAClD9B,QAAQC,IAAI+B,EAAEC,QACdjC,QAAQC,IAAIuB,GACZxB,QAAQC,IAAIuB,EAAQE,SAAQ,IAI9BN,EAAcW,iBAAiB,UAAWC,IACxCR,EAAQG,SAAWK,EAAGC,OAA4BH,MAClD9B,QAAQC,IAAIuB,EAAQG,SAAQ,IAI9BL,EAAaS,iBAAiB,UAAWC,IACvCR,EAAQI,IAAMI,EAAGC,OAA6BH,MAC9C9B,QAAQC,IAAIuB,EAAQI,IAAG,IAGzBL,EAAUQ,iBAAiB,SAAUC,IAEnC,GADAA,EAAEE,iBACwB,KAAvBZ,EAAaQ,MAAc,OAAOK,MAAM,yBAC3CX,EAAQI,IAAMN,EAAaQ,MAE3BN,EAAQC,GAAKX,EAnDfpB,eAAwB0C,GACtB,MACMC,EAAO,CACXC,OAAQ,OACRC,KAAMjC,KAAKC,UAAU6B,GACrBI,QAAS,CACP,eAAgB,oCAIpB,IACE,MAAM5C,QAAiBC,MAVb,oFAUwBwC,SACfzC,EAASG,OAC5BC,QAAQC,IAAImC,GAEZ,IAAIK,EAAkBrC,aAAaC,QAAQ,eAAgBC,KAAKC,UAAU6B,IAEtEM,EAAwBpC,KAAKO,MAAMT,aAAaO,QAAQ,iBAC5DX,QAAQC,IAAIwC,EAAgBC,GAC5BP,MAAM,mCAER,CAAE,MAAO1B,GACPT,QAAQC,IAAIQ,EACd,CACF,CA4BEkC,CAASnB,GACT7B,IAEAiD,YAAW,WAETC,OAAOC,SAASC,QAClB,GAAG,KAEH3B,EAAcU,MAAQ,GACtBT,EAAUS,MAAQ,GAClBR,EAAaQ,MAAQ","sources":["src/signUp/signUp.ts"],"sourcesContent":["type userType={\n  id: number,\n  username: string,\n  password: string,\n  pic: string\n}\n\nasync function showItems() {\n   \n    const url =`https://js2-slutprojekt-default-rtdb.europe-west1.firebasedatabase.app/users.json`\n    const response = await fetch(url);\n    const items = await response.json();\n    console.log(items);\n  \n    return items;\n  }\n\n  showItems()\n    .then((data) => {\n      console.log(data);\n      localStorage.setItem('allUserInfo', JSON.stringify(data));\n      \n    })\n    .catch((error) => console.log(error));\n\nconst isDataExits: string = localStorage.getItem('allUserInfo') as string;\n  \n  const allInfo: object = JSON.parse(isDataExits);\n // console.log(allInfo);\n  \n  let  id:number = Object.values(allInfo).length;\n  console.log(id);\n  \n  const form = document.getElementById('form') ! as HTMLFormElement;\n  let enterPassword = document.getElementById('enterPassword')! as HTMLInputElement;\n  let enterName = document.getElementById('enterName')! as HTMLInputElement;\n  let enterPicture = document.getElementById('enterPicture')! as HTMLInputElement;\n  \n  let insertBtn = document.getElementById('insert')! as HTMLButtonElement;\n  let signUpBtn = document.getElementById('ConfirmSignUp')! as HTMLButtonElement;\n  \n  let newUser: userType = {\n    id: 0,\n    username: '',\n    password: '',\n    pic: '',\n  };\n  \n  newUser.pic = document.querySelectorAll('[name=\"pic\"] option')[1].value;\n\n  async function postItem(newUser: object) {\n    const url = `https://js2-slutprojekt-default-rtdb.europe-west1.firebasedatabase.app/users.json`;\n    const init = {\n      method: 'POST',\n      body: JSON.stringify(newUser),\n      headers: {\n        'Content-type': 'application/json; charset=UFT-8',\n      },\n    };\n  \n    try {\n      const response = await fetch(url, init);\n      const data = await response.json();\n      console.log(newUser);\n  \n      let setPersonalInfo = localStorage.setItem('personalInfo', JSON.stringify(newUser))\n\n      let personalInfo: string  = JSON.parse(localStorage.getItem('personalInfo') as string);\n      console.log(setPersonalInfo,personalInfo);\n      alert('You have successfully registered');\n  \n    } catch (error) {\n      console.log(error);\n    }\n  }\n  \n  \n  enterName.addEventListener('change', (e) => {\n    newUser.username = (e.target as HTMLInputElement).value;\n    console.log(e.target);\n    console.log(newUser); \n    console.log(newUser.username);\n    \n  });\n  \n  enterPassword.addEventListener('change', (e) => {\n    newUser.password = (e.target as HTMLInputElement).value;\n    console.log(newUser.password);\n  });\n  \n  \n  enterPicture.addEventListener('change', (e) => {\n    newUser.pic = (e.target as HTMLSelectElement).value;\n    console.log(newUser.pic);\n  });\n  \n  insertBtn.addEventListener('click', (e) => {\n    e.preventDefault();\n    if(enterPicture.value === '') return alert('Please insert picture');\n    newUser.pic = enterPicture.value;\n\n    newUser.id = id;\n    postItem(newUser);\n    showItems();\n    \n    setTimeout(function(){\n\n      window.location.reload()\n    }, 3000)\n  \n    enterPassword.value = '';\n    enterName.value = '';\n    enterPicture.value = '';\n\n  });\n  \n  \n  \n  \n  \n\n\n\n"],"names":["async","$3dabc50bf2594758$var$showItems","response","fetch","items","json","console","log","then","data","localStorage","setItem","JSON","stringify","catch","error","$3dabc50bf2594758$var$isDataExits","getItem","$3dabc50bf2594758$var$allInfo","parse","$3dabc50bf2594758$var$id","Object","values","length","document","getElementById","$3dabc50bf2594758$var$enterPassword","$3dabc50bf2594758$var$enterName","$3dabc50bf2594758$var$enterPicture","$3dabc50bf2594758$var$insertBtn","$3dabc50bf2594758$var$newUser","id","username","password","pic","querySelectorAll","value","addEventListener","e","target","preventDefault","alert","newUser","init","method","body","headers","setPersonalInfo","personalInfo","$3dabc50bf2594758$var$postItem","setTimeout","window","location","reload"],"version":3,"file":"signUp.57c0a3bf.js.map"}