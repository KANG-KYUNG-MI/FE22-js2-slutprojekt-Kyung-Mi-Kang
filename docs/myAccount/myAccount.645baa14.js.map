{"mappings":"imBAsBA,IAAAA,EACAC,E,iFArBA,IAAIC,EAAU,CAAC,EAoBfF,EAlBA,SAAkBG,GAGhB,IAFA,IAAIC,EAAOC,OAAOD,KAAKD,GAEdG,EAAI,EAAGA,EAAIF,EAAKG,OAAQD,IAC/BJ,EAAQE,EAAKE,IAAMH,EAAMC,EAAKE,GAElC,EAaAL,EAXA,SAAiBO,GACf,IAAIC,EAAWP,EAAQM,GAEvB,GAAgB,MAAZC,EACF,MAAM,IAAIC,MAAM,oCAAsCF,GAGxD,OAAOC,CACT,C,ICpBAE,EAAA,SAAAC,SAA8CC,KAAKC,MAAM,mGCEzD,IAAIC,EAAyBC,aAAaC,QAAQ,gBAC9CC,EAAiCL,KAAKC,MAAMC,GAChDI,QAAQC,IAAIF,GAGYA,EAAaG,IAArC,IACIC,EAA8BJ,EAAaK,QAE/C,MAAMC,EAAiBC,SAASC,eAAe,kBAEzCC,EAAYF,SAASC,eAAe,aAI1C,IAAsBE,IADTV,EAGXS,EAAUE,UAGV,SAA0BC,GACxB,IAAIC,EAeJ,OAFEA,EAAY,aAAaf,aAAaC,QAAQ,4BAEzCc,EAAY,yEAGcD,EAAKE,SAASC,MAAM,KAAK,mCAM5D,CA5BsBC,CAAiBN,GA+BzC,MAAMO,EAAYV,SAASC,eAAe,aAa1CS,EAAUC,iBAAiB,SAAUC,IACnCA,EAAEC,iBACFnB,QAAQC,IAAIE,GAbdiB,eAA0BC,SACDC,MACrB,gFAAgFD,SAChF,CACEE,OAAQ,UAKd,CAKEC,CAAWrB,GACXN,aAAa4B,QAQf,WACE,MAAMC,EAAMpB,SAASqB,cAAc,OAC7BC,EAAA,IAAAC,IAAAC,GACN9B,QAAQC,IAAI,UAAU2B,GAEtBF,EAAIK,IAAMH,EAAOI,WACjB3B,EAAe4B,YAAYP,EAC7B,CAdEQ,GACFlB,EAAUmB,MAAMC,QAAU,OACxB5B,EAAUE,UAAU,M,SCrEtBoB,EAAiB,IAAAD,IAAoB,MAAQrC,EAAA,SAAA6C,QAA6C,qBAAAC,KAAUN,WDmFpG,MAAMO,EAAWjC,SAASC,eAAe,YACnCiC,EAAWlC,SAASC,eAAe,QACnCkC,EAAMnC,SAASC,eAAe,OAC9BmC,EAAYpC,SAASC,eAAe,aAE1C,IAAIoC,EAMAC,EALJJ,EAASvB,iBAAiB,UAAWC,IACnCA,EAAEC,iBACFwB,EAAUzB,EAAE2B,OAAOC,KAAK,IAI1BP,EAAStB,iBAAiB,UAAWC,IACnCA,EAAEC,iBACFyB,EAAc1B,EAAE2B,OAAOC,MACvB9C,QAAQC,IAAI2C,EAAA,IAGd,IAAIG,EAASzC,SAAS0C,iBAAiB,uBAAuB,GAAGF,MACjEL,EAAIxB,iBAAiB,UAAWC,IAC9BA,EAAEC,iBACF4B,EAAS7B,EAAE2B,OAAOC,KAAK,IAIzBJ,EAAUzB,iBAAiB,SAAUC,IACnCA,EAAEC,iBAWJC,eAAyB6B,EAASC,EAAaC,GAE/C,MAAMb,EAAM,gFAAgFnC,SAEpFiD,EAAO,CACX7B,OAAQ,QACR8B,KAAM3D,KAAK4D,UAAU,CAACzC,SAAUoC,EAASM,SAAUL,EAAahD,IAAKiD,IACrEK,QAAS,CACP,eAAgB,oCAQpB,IACE,MAAMC,QAAiBnC,MAAMgB,EAAKc,GAC5BM,QAAaD,EAASE,OAC5B3D,QAAQC,IAAIyD,GACZ7D,aAAa+D,QAAQ,eAAgBlE,KAAK4D,UAAUI,IAEpDG,MAAM,oCACNC,OAAOC,SAASC,SAChBb,EAASO,EAAKP,MAGhB,CAAE,MAAOc,GACPjE,QAAQC,IAAIgE,EACd,CACF,CAxCEC,CAAUvB,EAASC,EAAaG,GAEhCP,EAASM,MAAQ,GACjBP,EAASO,MAAQ,GACjBL,EAAIK,MAAQ","sources":["node_modules/@parcel/runtime-js/lib/helpers/bundle-manifest.js","node_modules/@parcel/runtime-js/lib/runtime-cb162f65023976e4.js","src/myAccount/myAccount.ts","node_modules/@parcel/runtime-js/lib/runtime-11742b600fef00e9.js"],"sourcesContent":["\"use strict\";\n\nvar mapping = {};\n\nfunction register(pairs) {\n  var keys = Object.keys(pairs);\n\n  for (var i = 0; i < keys.length; i++) {\n    mapping[keys[i]] = pairs[keys[i]];\n  }\n}\n\nfunction resolve(id) {\n  var resolved = mapping[id];\n\n  if (resolved == null) {\n    throw new Error('Could not resolve bundle with id ' + id);\n  }\n\n  return resolved;\n}\n\nmodule.exports.register = register;\nmodule.exports.resolve = resolve;","require('./helpers/bundle-manifest').register(JSON.parse(\"{\\\"dOGNV\\\":\\\"myAccount.645baa14.js\\\",\\\"l9g2R\\\":\\\"Bye.1deed048.png\\\"}\"));","\nimport { localStorageType } from \"index\";\nlet personalInfoLS: string = localStorage.getItem('personalInfo') as string;\nlet personalInfo: localStorageType = JSON.parse(personalInfoLS);\nconsole.log(personalInfo);\n// console.log(new URLSearchParams(location.search));\n\nlet myPicture: string = personalInfo.pic;\nlet personalInfoAddress: string = personalInfo.address as string;\n\nconst myPicContainer = document.getElementById('myPicContainer') as HTMLDivElement\n//const personalInfoContainer = document.getElementById('personalInfoContainer') as HTMLDivElement;\nconst container = document.getElementById('container') as HTMLDivElement;\n  //console.log(new URL(\"../media/Choco.jpg\", import.meta.url).toString())\n\ndisplayItems(personalInfo)\nfunction displayItems(items: object): any {\n\n  container.innerHTML = createHtmlString(items)\n\n\n  function createHtmlString(item: any) {\n    let domObject: string;\n    // console.warn(import.meta.url);\n    // console.warn(item);\n    // console.warn(new URL(\"../media/Brown.jpg\", import.meta.url).toString())\n    \n    // if (item.pic == \"Brown.jpg\")\n    //   domObject = `<img src=\"${new URL(\"../media/Brown.jpg\", import.meta.url).toString()}\" alt=\"pfp\">`\n    // else if (item.pic == \"Choco.jpg\")\n    //   domObject = `<img src=\"${new URL(\"../media/Choco.jpg\", import.meta.url).toString()}\" alt=\"pfp\">`\n    // else if (item.pic == \"ConMuzi.jpg\")\n    // domObject = `<img src=\"${new URL(\"../media/ConMuzi.jpg\", import.meta.url).toString()}\" alt=\"pfp\">` \n    //   else \n    //   domObject = `<img src=\"${new URL(\"../media/Selly.jpg\", import.meta.url).toString()}\" alt=\"pfp\">`\n      domObject = `<img src=\"${localStorage.getItem(\"userPicUrl\")}\" alt=\"pfp\">`\n\n    return domObject + `\n    <div class=\"item\"> \n      \n        <p class=\"item_name\">Name: ${item.username.split('@')[0]}</p>     \n    </div>\n        `;\n    //<img src=\"${item.pic}\" alt=\"\", class=\"item_img\" />\n   // <p class=\"item_id\">ID: ${item.id}</p>   \n   //<p class=\"item_password\">Password: ${item.password}</p>    \n  }\n}\n\nconst deleteBtn = document.getElementById('deleteBtn') as HTMLButtonElement\n\nasync function deleteData(Address:string) {\n  const response = await fetch(\n    `https://js2-slutprojekt-default-rtdb.europe-west1.firebasedatabase.app/users/${Address}.json`,\n    {\n      method: 'DELETE',\n    }\n  );\n\n  return response;\n}\n\ndeleteBtn.addEventListener('click', (e) => {\n  e.preventDefault();\n  console.log(personalInfoAddress);\n  deleteData(personalInfoAddress);\n  localStorage.clear();\n  displayItems1()\ndeleteBtn.style.display = \"none\";\n  container.innerHTML=\"\";\n\n});\n\n\nfunction displayItems1(){\n  const img = document.createElement('img') as HTMLImageElement;\n  const imgUrl = new URL(`../media/Bye.png`, import.meta.url);\n  console.log(\"testing\",imgUrl);\n  \n  img.src = imgUrl.toString()\n  myPicContainer.appendChild(img);\n}\n\nconst password = document.getElementById('password');\nconst userName = document.getElementById('name');\nconst pic = document.getElementById('pic');\nconst updateBtn = document.getElementById('updateBtn');\n\nlet newName;\nuserName.addEventListener('change', (e) => {\n  e.preventDefault();\n  newName = e.target.value;\n});\n\nlet newPassword;\npassword.addEventListener('change', (e) => {\n  e.preventDefault();\n  newPassword = e.target.value;\n  console.log(newPassword);\n});\n\nlet newPic = document.querySelectorAll('[name=\"pic\"] option')[1].value;\npic.addEventListener('change', (e) => {\n  e.preventDefault();\n  newPic = e.target.value;\n  \n});\n\nupdateBtn.addEventListener('click', (e) => {\n  e.preventDefault();\n  patchName(newName, newPassword, newPic);\n\n  userName.value = '';\n  password.value = '';\n  pic.value = '';\n\n\n});\n\n\nasync function patchName(newName, newPassword, newPic) {\n\nconst url = `https://js2-slutprojekt-default-rtdb.europe-west1.firebasedatabase.app/users/${personalInfoAddress}.json`;\n\n  const init = {\n    method: 'PATCH',\n    body: JSON.stringify({username: newName, password: newPassword, pic: newPic }),\n    headers: {\n      'Content-type': 'application/json; charset=UTF-8',\n    },\n  };\n\n  // const response = await fetch(url, init);\n  // const id = await response.json();\n  // console.log(id);\n\n  try {\n    const response = await fetch(url, init);\n    const data = await response.json();\n    console.log(data);\n    localStorage.setItem('personalInfo', JSON.stringify(data))\n\n    alert('You have successfully registered');\n    window.location.reload()\n    newPic = data.newPic;\n\n\n  } catch (error) {\n    console.log(error);\n  }\n}\n","module.exports = new __parcel__URL__(\"../\" + require('./helpers/bundle-manifest').resolve(\"l9g2R\")).toString();"],"names":["$18c11f3350a906ea$export$6503ec6e8aabbaf","$18c11f3350a906ea$export$f7ad0328861e2f03","$18c11f3350a906ea$var$mapping","pairs","keys","Object","i","length","id","resolved","Error","parcelRequire","register","JSON","parse","$f486a07a2a9ae877$var$personalInfoLS","localStorage","getItem","$f486a07a2a9ae877$var$personalInfo","console","log","pic","$f486a07a2a9ae877$var$personalInfoAddress","address","$f486a07a2a9ae877$var$myPicContainer","document","getElementById","$f486a07a2a9ae877$var$container","items","innerHTML","item","domObject","username","split","createHtmlString","$f486a07a2a9ae877$var$deleteBtn","addEventListener","e","preventDefault","async","Address","fetch","method","$f486a07a2a9ae877$var$deleteData","clear","img","createElement","imgUrl","URL","$6d42e3caf59da007$exports","src","toString","appendChild","$f486a07a2a9ae877$var$displayItems1","style","display","resolve","url","$f486a07a2a9ae877$var$password","$f486a07a2a9ae877$var$userName","$f486a07a2a9ae877$var$pic","$f486a07a2a9ae877$var$updateBtn","$f486a07a2a9ae877$var$newName","$f486a07a2a9ae877$var$newPassword","target","value","$f486a07a2a9ae877$var$newPic","querySelectorAll","newName","newPassword","newPic","init","body","stringify","password","headers","response","data","json","setItem","alert","window","location","reload","error","$f486a07a2a9ae877$var$patchName"],"version":3,"file":"myAccount.645baa14.js.map"}